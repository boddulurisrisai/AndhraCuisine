{"ast":null,"code":"var _jsxFileName = \"/Users/karthikreddy/Downloads/EWA Project/AndhraCuisine/front-end/src/pages/ChatAssistant.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport ChatInput from './ChatInput'; // Input component for the chat\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ChatAssistant() {\n  _s();\n  const [messages, setMessages] = useState([{\n    text: 'Welcome to our food service! How can I assist you today?',\n    sender: 'assistant'\n  }]);\n  const handleSendMessage = async newMessage => {\n    setMessages(prevMessages => [...prevMessages, {\n      text: newMessage,\n      sender: 'user'\n    }]);\n    try {\n      // Sending message to the correct backend API, which interacts with OpenAI\n      const response = await fetch('http://localhost:3030/api/chat/recommendation', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          message: newMessage\n        })\n      });\n      const data = await response.json();\n\n      // Add assistant's response to the chat\n      setMessages(prevMessages => [...prevMessages, {\n        text: data.recommendation,\n        sender: 'assistant'\n      }]);\n\n      // If products are returned, display them as a list in the chat\n      if (data.products && data.products.length > 0) {\n        const productList = data.products.map(product => `${product.name}: ${product.description}`).join('\\n');\n        setMessages(prevMessages => [...prevMessages, {\n          text: `Here are some products:\\n${productList}`,\n          sender: 'assistant'\n        }]);\n      }\n    } catch (error) {\n      console.error('Error sending message:', error);\n      setMessages(prevMessages => [...prevMessages, {\n        text: 'Sorry, there was an issue. Please try again.',\n        sender: 'assistant'\n      }]);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-assistant-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-box\",\n      children: messages.map((message, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `message ${message.sender}`,\n        children: message.text.split('\\n').map((line, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: line\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 29\n        }, this))\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ChatInput, {\n      onSendMessage: handleSendMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 9\n  }, this);\n}\n_s(ChatAssistant, \"+GPDvaZyvg4eJpzEJ460hCWCh58=\");\n_c = ChatAssistant;\nexport default ChatAssistant;\nvar _c;\n$RefreshReg$(_c, \"ChatAssistant\");","map":{"version":3,"names":["React","useState","ChatInput","jsxDEV","_jsxDEV","ChatAssistant","_s","messages","setMessages","text","sender","handleSendMessage","newMessage","prevMessages","response","fetch","method","headers","body","JSON","stringify","message","data","json","recommendation","products","length","productList","map","product","name","description","join","error","console","className","children","index","split","line","i","fileName","_jsxFileName","lineNumber","columnNumber","onSendMessage","_c","$RefreshReg$"],"sources":["/Users/karthikreddy/Downloads/EWA Project/AndhraCuisine/front-end/src/pages/ChatAssistant.js"],"sourcesContent":["import React, { useState } from 'react';\nimport ChatInput from './ChatInput'; // Input component for the chat\n\nfunction ChatAssistant() {\n    const [messages, setMessages] = useState([\n        { text: 'Welcome to our food service! How can I assist you today?', sender: 'assistant' }\n    ]);\n\n    const handleSendMessage = async (newMessage) => {\n        setMessages((prevMessages) => [...prevMessages, { text: newMessage, sender: 'user' }]);\n\n        try {\n            // Sending message to the correct backend API, which interacts with OpenAI\n            const response = await fetch('http://localhost:3030/api/chat/recommendation', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ message: newMessage }),\n            });\n\n            const data = await response.json();\n\n            // Add assistant's response to the chat\n            setMessages((prevMessages) => [\n                ...prevMessages,\n                { text: data.recommendation, sender: 'assistant' },\n            ]);\n\n            // If products are returned, display them as a list in the chat\n            if (data.products && data.products.length > 0) {\n                const productList = data.products.map(product => `${product.name}: ${product.description}`).join('\\n');\n                setMessages((prevMessages) => [\n                    ...prevMessages,\n                    { text: `Here are some products:\\n${productList}`, sender: 'assistant' }\n                ]);\n            }\n\n        } catch (error) {\n            console.error('Error sending message:', error);\n            setMessages((prevMessages) => [\n                ...prevMessages,\n                { text: 'Sorry, there was an issue. Please try again.', sender: 'assistant' }\n            ]);\n        }\n    };\n\n    return (\n        <div className=\"chat-assistant-container\">\n            <div className=\"chat-box\">\n                {messages.map((message, index) => (\n                    <div key={index} className={`message ${message.sender}`}>\n                        {message.text.split('\\n').map((line, i) => (\n                            <div key={i}>{line}</div>\n                        ))}\n                    </div>\n                ))}\n            </div>\n            <ChatInput onSendMessage={handleSendMessage} />\n        </div>\n    );\n}\n\nexport default ChatAssistant;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,SAAS,MAAM,aAAa,CAAC,CAAC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAErC,SAASC,aAAaA,CAAA,EAAG;EAAAC,EAAA;EACrB,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGP,QAAQ,CAAC,CACrC;IAAEQ,IAAI,EAAE,0DAA0D;IAAEC,MAAM,EAAE;EAAY,CAAC,CAC5F,CAAC;EAEF,MAAMC,iBAAiB,GAAG,MAAOC,UAAU,IAAK;IAC5CJ,WAAW,CAAEK,YAAY,IAAK,CAAC,GAAGA,YAAY,EAAE;MAAEJ,IAAI,EAAEG,UAAU;MAAEF,MAAM,EAAE;IAAO,CAAC,CAAC,CAAC;IAEtF,IAAI;MACA;MACA,MAAMI,QAAQ,GAAG,MAAMC,KAAK,CAAC,+CAA+C,EAAE;QAC1EC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAEC,OAAO,EAAET;QAAW,CAAC;MAChD,CAAC,CAAC;MAEF,MAAMU,IAAI,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;;MAElC;MACAf,WAAW,CAAEK,YAAY,IAAK,CAC1B,GAAGA,YAAY,EACf;QAAEJ,IAAI,EAAEa,IAAI,CAACE,cAAc;QAAEd,MAAM,EAAE;MAAY,CAAC,CACrD,CAAC;;MAEF;MACA,IAAIY,IAAI,CAACG,QAAQ,IAAIH,IAAI,CAACG,QAAQ,CAACC,MAAM,GAAG,CAAC,EAAE;QAC3C,MAAMC,WAAW,GAAGL,IAAI,CAACG,QAAQ,CAACG,GAAG,CAACC,OAAO,IAAI,GAAGA,OAAO,CAACC,IAAI,KAAKD,OAAO,CAACE,WAAW,EAAE,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC;QACtGxB,WAAW,CAAEK,YAAY,IAAK,CAC1B,GAAGA,YAAY,EACf;UAAEJ,IAAI,EAAE,4BAA4BkB,WAAW,EAAE;UAAEjB,MAAM,EAAE;QAAY,CAAC,CAC3E,CAAC;MACN;IAEJ,CAAC,CAAC,OAAOuB,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;MAC9CzB,WAAW,CAAEK,YAAY,IAAK,CAC1B,GAAGA,YAAY,EACf;QAAEJ,IAAI,EAAE,8CAA8C;QAAEC,MAAM,EAAE;MAAY,CAAC,CAChF,CAAC;IACN;EACJ,CAAC;EAED,oBACIN,OAAA;IAAK+B,SAAS,EAAC,0BAA0B;IAAAC,QAAA,gBACrChC,OAAA;MAAK+B,SAAS,EAAC,UAAU;MAAAC,QAAA,EACpB7B,QAAQ,CAACqB,GAAG,CAAC,CAACP,OAAO,EAAEgB,KAAK,kBACzBjC,OAAA;QAAiB+B,SAAS,EAAE,WAAWd,OAAO,CAACX,MAAM,EAAG;QAAA0B,QAAA,EACnDf,OAAO,CAACZ,IAAI,CAAC6B,KAAK,CAAC,IAAI,CAAC,CAACV,GAAG,CAAC,CAACW,IAAI,EAAEC,CAAC,kBAClCpC,OAAA;UAAAgC,QAAA,EAAcG;QAAI,GAARC,CAAC;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAa,CAC3B;MAAC,GAHIP,KAAK;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAIV,CACR;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD,CAAC,eACNxC,OAAA,CAACF,SAAS;MAAC2C,aAAa,EAAElC;IAAkB;MAAA8B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC9C,CAAC;AAEd;AAACtC,EAAA,CAxDQD,aAAa;AAAAyC,EAAA,GAAbzC,aAAa;AA0DtB,eAAeA,aAAa;AAAC,IAAAyC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}